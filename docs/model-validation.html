<!DOCTYPE html>
<html lang="es" xml:lang="es">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4.7 Model validation | Area-models-for-estimating-poverty-and-labor-market-indicators</title>
  <meta name="description" content="Area models for estimating poverty and labor market indicators" />
  <meta name="generator" content="bookdown 0.36 and GitBook 2.6.7" />

  <meta property="og:title" content="4.7 Model validation | Area-models-for-estimating-poverty-and-labor-market-indicators" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Area models for estimating poverty and labor market indicators" />
  <meta name="github-repo" content="psirusteam/HHS-Handbook" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4.7 Model validation | Area-models-for-estimating-poverty-and-labor-market-indicators" />
  
  <meta name="twitter:description" content="Area models for estimating poverty and labor market indicators" />
  



<meta name="date" content="2023-12-05" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="preparing-supplies-for-stan.html"/>
<link rel="next" href="parameter-estimation..html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Area models for estimating poverty and labor market indicators</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Workshop material</a>
<ul>
<li class="chapter" data-level="" data-path="workshop-material-1.html"><a href="workshop-material-1.html"><i class="fa fa-check"></i>Workshop material</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="session-1--census-and-satellite-information.html"><a href="session-1--census-and-satellite-information.html"><i class="fa fa-check"></i><b>1</b> Session 1- Census and satellite information</a>
<ul>
<li class="chapter" data-level="1.1" data-path="use-of-satellite-imagery-and-sae.html"><a href="use-of-satellite-imagery-and-sae.html"><i class="fa fa-check"></i><b>1.1</b> Use of Satellite Imagery and SAE</a></li>
<li class="chapter" data-level="1.2" data-path="satellite-image-data-sources.html"><a href="satellite-image-data-sources.html"><i class="fa fa-check"></i><b>1.2</b> Satellite Image Data Sources</a></li>
<li class="chapter" data-level="1.3" data-path="google-earth-engine.html"><a href="google-earth-engine.html"><i class="fa fa-check"></i><b>1.3</b> Google Earth Engine</a></li>
<li class="chapter" data-level="1.4" data-path="installing-rgee.html"><a href="installing-rgee.html"><i class="fa fa-check"></i><b>1.4</b> Installing rgee</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="installing-rgee.html"><a href="installing-rgee.html#downloading-satellite-information"><i class="fa fa-check"></i><b>1.4.1</b> Downloading Satellite Information</a></li>
<li class="chapter" data-level="1.4.2" data-path="installing-rgee.html"><a href="installing-rgee.html#night-lights"><i class="fa fa-check"></i><b>1.4.2</b> Night Lights</a></li>
<li class="chapter" data-level="1.4.3" data-path="installing-rgee.html"><a href="installing-rgee.html#crop-cover"><i class="fa fa-check"></i><b>1.4.3</b> Crop Cover</a></li>
<li class="chapter" data-level="1.4.4" data-path="installing-rgee.html"><a href="installing-rgee.html#urban-cover"><i class="fa fa-check"></i><b>1.4.4</b> Urban Cover</a></li>
<li class="chapter" data-level="1.4.5" data-path="installing-rgee.html"><a href="installing-rgee.html#human-modification"><i class="fa fa-check"></i><b>1.4.5</b> Human Modification</a></li>
<li class="chapter" data-level="1.4.6" data-path="installing-rgee.html"><a href="installing-rgee.html#average-travel-time-to-hospital"><i class="fa fa-check"></i><b>1.4.6</b> Average Travel Time to Hospital</a></li>
<li class="chapter" data-level="1.4.7" data-path="installing-rgee.html"><a href="installing-rgee.html#average-travel-time-to-hospital-by-non-motorized-vehicle"><i class="fa fa-check"></i><b>1.4.7</b> Average Travel Time to Hospital by Non-Motorized Vehicle</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="population-and-housing-censuses.html"><a href="population-and-housing-censuses.html"><i class="fa fa-check"></i><b>1.5</b> Population and Housing Censuses</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="population-and-housing-censuses.html"><a href="population-and-housing-censuses.html#mapas-de-las-variables-con-información-censal."><i class="fa fa-check"></i><b>1.5.1</b> Mapas de las variables con información censal.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="session-2--generalized-variance-function.html"><a href="session-2--generalized-variance-function.html"><i class="fa fa-check"></i><b>2</b> Session 2- Generalized Variance Function</a>
<ul>
<li class="chapter" data-level="2.1" data-path="graphical-analysis.html"><a href="graphical-analysis.html"><i class="fa fa-check"></i><b>2.1</b> Graphical Analysis</a></li>
<li class="chapter" data-level="2.2" data-path="variance-model.html"><a href="variance-model.html"><i class="fa fa-check"></i><b>2.2</b> Variance Model</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="session-3--fay-herriot-model---poverty-estimation.html"><a href="session-3--fay-herriot-model---poverty-estimation.html"><i class="fa fa-check"></i><b>3</b> Session 3- Fay Herriot Model - Poverty Estimation</a>
<ul>
<li class="chapter" data-level="" data-path="session-3--fay-herriot-model---poverty-estimation.html"><a href="session-3--fay-herriot-model---poverty-estimation.html#area-model-for-poverty-estimation"><i class="fa fa-check"></i>Area Model for Poverty Estimation</a></li>
<li class="chapter" data-level="" data-path="session-3--fay-herriot-model---poverty-estimation.html"><a href="session-3--fay-herriot-model---poverty-estimation.html#optimal-predictor-of-p_d"><i class="fa fa-check"></i>Optimal Predictor of <span class="math inline">\(P_d\)</span></a></li>
<li class="chapter" data-level="3.1" data-path="estimation-procedure.html"><a href="estimation-procedure.html"><i class="fa fa-check"></i><b>3.1</b> Estimation Procedure</a></li>
<li class="chapter" data-level="3.2" data-path="preparing-the-supplies-for-stan.html"><a href="preparing-the-supplies-for-stan.html"><i class="fa fa-check"></i><b>3.2</b> Preparing the supplies for <code>STAN</code></a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="preparing-the-supplies-for-stan.html"><a href="preparing-the-supplies-for-stan.html#results-of-the-model-for-observed-domains."><i class="fa fa-check"></i><b>3.2.1</b> Results of the model for observed domains.</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="area-models---arcsin-transformation..html"><a href="area-models---arcsin-transformation..html"><i class="fa fa-check"></i><b>3.3</b> Area models - ArcSin transformation.</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="area-models---arcsin-transformation..html"><a href="area-models---arcsin-transformation..html#estimation-procedure-1"><i class="fa fa-check"></i><b>3.3.1</b> Estimation procedure</a></li>
<li class="chapter" data-level="3.3.2" data-path="area-models---arcsin-transformation..html"><a href="area-models---arcsin-transformation..html#preparing-inputs-for-stan"><i class="fa fa-check"></i><b>3.3.2</b> Preparing Inputs for <code>STAN</code></a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="benchmark-process.html"><a href="benchmark-process.html"><i class="fa fa-check"></i><b>3.4</b> Benchmark Process</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="benchmark-process.html"><a href="benchmark-process.html#results-validation"><i class="fa fa-check"></i><b>3.4.1</b> Results Validation</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="poverty-map.html"><a href="poverty-map.html"><i class="fa fa-check"></i><b>3.5</b> Poverty Map</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="session-4---area-model-for-labor-market-statistics.html"><a href="session-4---area-model-for-labor-market-statistics.html"><i class="fa fa-check"></i><b>4</b> Session 4 - Area model for labor market statistics</a>
<ul>
<li class="chapter" data-level="4.1" data-path="definition-of-the-multinomial-model.html"><a href="definition-of-the-multinomial-model.html"><i class="fa fa-check"></i><b>4.1</b> Definition of the Multinomial Model</a></li>
<li class="chapter" data-level="4.2" data-path="loading-libraries.html"><a href="loading-libraries.html"><i class="fa fa-check"></i><b>4.2</b> Loading Libraries</a></li>
<li class="chapter" data-level="4.3" data-path="reading-the-survey-and-direct-estimates.html"><a href="reading-the-survey-and-direct-estimates.html"><i class="fa fa-check"></i><b>4.3</b> Reading the survey and direct estimates</a></li>
<li class="chapter" data-level="4.4" data-path="domain-selection.html"><a href="domain-selection.html"><i class="fa fa-check"></i><b>4.4</b> Domain Selection</a></li>
<li class="chapter" data-level="4.5" data-path="modeling-in-stan.html"><a href="modeling-in-stan.html"><i class="fa fa-check"></i><b>4.5</b> Modeling in <code>STAN</code></a></li>
<li class="chapter" data-level="4.6" data-path="preparing-supplies-for-stan.html"><a href="preparing-supplies-for-stan.html"><i class="fa fa-check"></i><b>4.6</b> Preparing supplies for <code>STAN</code></a></li>
<li class="chapter" data-level="4.7" data-path="model-validation.html"><a href="model-validation.html"><i class="fa fa-check"></i><b>4.7</b> Model validation</a>
<ul>
<li class="chapter" data-level="" data-path="model-validation.html"><a href="model-validation.html#fixed-effects"><i class="fa fa-check"></i>Fixed effects</a></li>
<li class="chapter" data-level="" data-path="model-validation.html"><a href="model-validation.html#random-effects"><i class="fa fa-check"></i>Random effects</a></li>
<li class="chapter" data-level="4.7.1" data-path="model-validation.html"><a href="model-validation.html#posterior-predictive-distribution"><i class="fa fa-check"></i><b>4.7.1</b> Posterior predictive distribution</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="parameter-estimation..html"><a href="parameter-estimation..html"><i class="fa fa-check"></i><b>4.8</b> Parameter estimation.</a></li>
<li class="chapter" data-level="4.9" data-path="estimation-of-standard-deviation-and-coefficient-of-variation.html"><a href="estimation-of-standard-deviation-and-coefficient-of-variation.html"><i class="fa fa-check"></i><b>4.9</b> Estimation of Standard Deviation and Coefficient of Variation</a></li>
<li class="chapter" data-level="4.10" data-path="metodología-de-benchmarking.html"><a href="metodología-de-benchmarking.html"><i class="fa fa-check"></i><b>4.10</b> Metodología de Benchmarking</a>
<ul>
<li class="chapter" data-level="4.10.1" data-path="metodología-de-benchmarking.html"><a href="metodología-de-benchmarking.html#grafico-de-validación-del-benchmarking"><i class="fa fa-check"></i><b>4.10.1</b> Grafico de validación del Benchmarking</a></li>
</ul></li>
<li class="chapter" data-level="4.11" data-path="labor-market-maps..html"><a href="labor-market-maps..html"><i class="fa fa-check"></i><b>4.11</b> Labor market maps.</a>
<ul>
<li class="chapter" data-level="" data-path="labor-market-maps..html"><a href="labor-market-maps..html#occupancy-rate-1"><i class="fa fa-check"></i>Occupancy Rate</a></li>
<li class="chapter" data-level="" data-path="labor-market-maps..html"><a href="labor-market-maps..html#unemployment-rate-1"><i class="fa fa-check"></i>Unemployment Rate</a></li>
<li class="chapter" data-level="" data-path="labor-market-maps..html"><a href="labor-market-maps..html#inactivo"><i class="fa fa-check"></i>Inactivo</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a Area models for estimating poverty and labor market indicators </a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="model-validation" class="section level2 hasAnchor" number="4.7">
<h2><span class="header-section-number">4.7</span> Model validation<a href="model-validation.html#model-validation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Model validation is essential to assess a model’s ability to accurately and reliably predict future outcomes. In the case of a multinomial response area model, validation focuses on measuring the model’s accuracy in predicting different response categories. The main objective of validation is to determine if the model can generalize well to unseen data and provide accurate predictions. This involves comparing the model’s predictions to observed data and using evaluation metrics to measure model performance. Model validation is crucial to ensure prediction quality and the model’s reliability for use in future applications.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="model-validation.html#cb77-1" tabindex="-1"></a>infile <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;Recursos/05_Empleo/05_model_bayes_multinomial_cor.Rds&quot;</span>)</span>
<span id="cb77-2"><a href="model-validation.html#cb77-2" tabindex="-1"></a>model_bayes <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(infile)</span>
<span id="cb77-3"><a href="model-validation.html#cb77-3" tabindex="-1"></a></span>
<span id="cb77-4"><a href="model-validation.html#cb77-4" tabindex="-1"></a><span class="co">#--- Exporting Bayesian Multilevel Model Results ---#</span></span>
<span id="cb77-5"><a href="model-validation.html#cb77-5" tabindex="-1"></a></span>
<span id="cb77-6"><a href="model-validation.html#cb77-6" tabindex="-1"></a>paramtros <span class="ot">&lt;-</span> <span class="fu">summary</span>(model_bayes)<span class="sc">$</span>summary <span class="sc">%&gt;%</span> <span class="fu">data.frame</span>()</span>
<span id="cb77-7"><a href="model-validation.html#cb77-7" tabindex="-1"></a></span>
<span id="cb77-8"><a href="model-validation.html#cb77-8" tabindex="-1"></a>tbla_rhat <span class="ot">&lt;-</span> <span class="fu">mcmc_rhat_data</span>(paramtros<span class="sc">$</span>Rhat) <span class="sc">%&gt;%</span> </span>
<span id="cb77-9"><a href="model-validation.html#cb77-9" tabindex="-1"></a>  <span class="fu">group_by</span>(description) <span class="sc">%&gt;%</span> </span>
<span id="cb77-10"><a href="model-validation.html#cb77-10" tabindex="-1"></a>  <span class="fu">tally</span>() <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Porcen =</span> n<span class="sc">/</span><span class="fu">sum</span>(n)<span class="sc">*</span><span class="dv">100</span>)</span>
<span id="cb77-11"><a href="model-validation.html#cb77-11" tabindex="-1"></a></span>
<span id="cb77-12"><a href="model-validation.html#cb77-12" tabindex="-1"></a>tbla_rhat <span class="sc">%&gt;%</span> <span class="fu">tba</span>()</span></code></pre></div>
<table class="table table-striped lightable-classic" style="width: auto !important; margin-left: auto; margin-right: auto; font-family: Arial Narrow; width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
description
</th>
<th style="text-align:right;">
n
</th>
<th style="text-align:right;">
Porcen
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
hat(R) &lt;= 1.05
</td>
<td style="text-align:right;">
599
</td>
<td style="text-align:right;">
100
</td>
</tr>
</tbody>
</table>
<div id="fixed-effects" class="section level3 unnumbered hasAnchor">
<h3>Fixed effects<a href="model-validation.html#fixed-effects" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="model-validation.html#cb78-1" tabindex="-1"></a>efecto_fijo <span class="ot">&lt;-</span>  <span class="fu">grep</span>(<span class="at">pattern =</span> <span class="st">&quot;beta&quot;</span>, </span>
<span id="cb78-2"><a href="model-validation.html#cb78-2" tabindex="-1"></a>                     <span class="at">x =</span> <span class="fu">rownames</span>(paramtros),</span>
<span id="cb78-3"><a href="model-validation.html#cb78-3" tabindex="-1"></a>                     <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb78-4"><a href="model-validation.html#cb78-4" tabindex="-1"></a></span>
<span id="cb78-5"><a href="model-validation.html#cb78-5" tabindex="-1"></a>p_fijo <span class="ot">&lt;-</span> <span class="fu">traceplot</span>(model_bayes, <span class="at">pars =</span> efecto_fijo)</span>
<span id="cb78-6"><a href="model-validation.html#cb78-6" tabindex="-1"></a>p_fijo</span></code></pre></div>
<p><img src="Recursos/05_Empleo/07_betas_fijos.png" /></p>
</div>
<div id="random-effects" class="section level3 unnumbered hasAnchor">
<h3>Random effects<a href="model-validation.html#random-effects" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="model-validation.html#cb79-1" tabindex="-1"></a>efecto_aleatorio <span class="ot">&lt;-</span>  <span class="fu">grep</span>(<span class="at">pattern =</span> <span class="st">&quot;z_u&quot;</span>, </span>
<span id="cb79-2"><a href="model-validation.html#cb79-2" tabindex="-1"></a>                          <span class="at">x =</span> <span class="fu">rownames</span>(paramtros),</span>
<span id="cb79-3"><a href="model-validation.html#cb79-3" tabindex="-1"></a>                          <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb79-4"><a href="model-validation.html#cb79-4" tabindex="-1"></a></span>
<span id="cb79-5"><a href="model-validation.html#cb79-5" tabindex="-1"></a>p_alea1 <span class="ot">&lt;-</span> <span class="fu">traceplot</span>(model_bayes, <span class="at">pars =</span> efecto_aleatorio[<span class="dv">1</span><span class="sc">:</span><span class="dv">26</span>])</span>
<span id="cb79-6"><a href="model-validation.html#cb79-6" tabindex="-1"></a>p_alea2 <span class="ot">&lt;-</span> <span class="fu">traceplot</span>(model_bayes, <span class="at">pars =</span> efecto_aleatorio[<span class="dv">27</span><span class="sc">:</span>(<span class="dv">26</span><span class="sc">*</span><span class="dv">2</span>)])</span>
<span id="cb79-7"><a href="model-validation.html#cb79-7" tabindex="-1"></a>p_alea3 <span class="ot">&lt;-</span> <span class="fu">traceplot</span>(model_bayes, <span class="at">pars =</span> efecto_aleatorio[(<span class="dv">26</span><span class="sc">*</span><span class="dv">2</span>)<span class="sc">:</span><span class="dv">78</span>])</span></code></pre></div>
<p><img src="Recursos/05_Empleo/08a_trece_alea1.png" />
<img src="Recursos/05_Empleo/08b_trece_alea2.png" />
<img src="Recursos/05_Empleo/08c_trece_alea3.png" />
### Estimated values for the correlation matrix {-}</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="model-validation.html#cb80-1" tabindex="-1"></a><span class="do">## Valores estimados para la matriz de correlación</span></span>
<span id="cb80-2"><a href="model-validation.html#cb80-2" tabindex="-1"></a>omega12 <span class="ot">&lt;-</span> <span class="fu">summary</span>(model_bayes, <span class="at">pars =</span> <span class="st">&quot;Omega[1,2]&quot;</span>)<span class="sc">$</span>summary</span>
<span id="cb80-3"><a href="model-validation.html#cb80-3" tabindex="-1"></a></span>
<span id="cb80-4"><a href="model-validation.html#cb80-4" tabindex="-1"></a>plot_omega <span class="ot">&lt;-</span> <span class="fu">Plot_dens_draws</span>(model_bayes, <span class="at">pars =</span> <span class="st">&quot;Omega[1,2]&quot;</span>)</span></code></pre></div>
<p><img src="Recursos/05_Empleo/09_omega.png" /></p>
</div>
<div id="posterior-predictive-distribution" class="section level3 hasAnchor" number="4.7.1">
<h3><span class="header-section-number">4.7.1</span> Posterior predictive distribution<a href="model-validation.html#posterior-predictive-distribution" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="model-validation.html#cb81-1" tabindex="-1"></a>theta_dir <span class="ot">&lt;-</span> indicador_dam1 <span class="sc">%&gt;%</span>  </span>
<span id="cb81-2"><a href="model-validation.html#cb81-2" tabindex="-1"></a>  <span class="fu">transmute</span>(dam2,</span>
<span id="cb81-3"><a href="model-validation.html#cb81-3" tabindex="-1"></a>    <span class="at">n =</span> n_desocupado <span class="sc">+</span> n_ocupado <span class="sc">+</span> n_inactivo,</span>
<span id="cb81-4"><a href="model-validation.html#cb81-4" tabindex="-1"></a>        Ocupado, Desocupado, Inactivo) </span>
<span id="cb81-5"><a href="model-validation.html#cb81-5" tabindex="-1"></a></span>
<span id="cb81-6"><a href="model-validation.html#cb81-6" tabindex="-1"></a><span class="fu">color_scheme_set</span>(<span class="st">&quot;brightblue&quot;</span>)</span>
<span id="cb81-7"><a href="model-validation.html#cb81-7" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">15</span>))</span>
<span id="cb81-8"><a href="model-validation.html#cb81-8" tabindex="-1"></a>y_pred_B <span class="ot">&lt;-</span> <span class="fu">as.array</span>(model_bayes, <span class="at">pars =</span> <span class="st">&quot;theta&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb81-9"><a href="model-validation.html#cb81-9" tabindex="-1"></a>  <span class="fu">as_draws_matrix</span>()</span>
<span id="cb81-10"><a href="model-validation.html#cb81-10" tabindex="-1"></a>  </span>
<span id="cb81-11"><a href="model-validation.html#cb81-11" tabindex="-1"></a>rowsrandom <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">nrow</span>(y_pred_B), <span class="dv">100</span>)</span>
<span id="cb81-12"><a href="model-validation.html#cb81-12" tabindex="-1"></a></span>
<span id="cb81-13"><a href="model-validation.html#cb81-13" tabindex="-1"></a>theta_1<span class="ot">&lt;-</span>  <span class="fu">grep</span>(<span class="at">pattern =</span> <span class="st">&quot;1]&quot;</span>,<span class="at">x =</span> <span class="fu">colnames</span>(y_pred_B),<span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb81-14"><a href="model-validation.html#cb81-14" tabindex="-1"></a>theta_2<span class="ot">&lt;-</span>  <span class="fu">grep</span>(<span class="at">pattern =</span> <span class="st">&quot;2]&quot;</span>,<span class="at">x =</span> <span class="fu">colnames</span>(y_pred_B),<span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb81-15"><a href="model-validation.html#cb81-15" tabindex="-1"></a>theta_3<span class="ot">&lt;-</span>  <span class="fu">grep</span>(<span class="at">pattern =</span> <span class="st">&quot;3]&quot;</span>,<span class="at">x =</span> <span class="fu">colnames</span>(y_pred_B),<span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb81-16"><a href="model-validation.html#cb81-16" tabindex="-1"></a>y_pred1 <span class="ot">&lt;-</span> y_pred_B[rowsrandom,theta_1 ]</span>
<span id="cb81-17"><a href="model-validation.html#cb81-17" tabindex="-1"></a>y_pred2 <span class="ot">&lt;-</span> y_pred_B[rowsrandom,theta_2 ]</span>
<span id="cb81-18"><a href="model-validation.html#cb81-18" tabindex="-1"></a>y_pred3 <span class="ot">&lt;-</span> y_pred_B[rowsrandom,theta_3 ]</span>
<span id="cb81-19"><a href="model-validation.html#cb81-19" tabindex="-1"></a></span>
<span id="cb81-20"><a href="model-validation.html#cb81-20" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ppc_dens_overlay</span>(<span class="at">y =</span> <span class="fu">as.numeric</span>(theta_dir<span class="sc">$</span>Ocupado), y_pred1)<span class="sc">/</span></span>
<span id="cb81-21"><a href="model-validation.html#cb81-21" tabindex="-1"></a>  <span class="fu">ppc_dens_overlay</span>(<span class="at">y =</span> <span class="fu">as.numeric</span>(theta_dir<span class="sc">$</span>Desocupado), y_pred2)<span class="sc">/</span></span>
<span id="cb81-22"><a href="model-validation.html#cb81-22" tabindex="-1"></a>  <span class="fu">ppc_dens_overlay</span>(<span class="at">y =</span> <span class="fu">as.numeric</span>(theta_dir<span class="sc">$</span>Inactivo), y_pred3)</span></code></pre></div>
<p><img src="Recursos/05_Empleo/10_ppc.png" /></p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="preparing-supplies-for-stan.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="parameter-estimation..html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/psirusteam/2021ASDA/05_S2_Work_Market.qmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Area models for estimating poverty and labor market indicators.pdf", "Area models for estimating poverty and labor market indicators.epub", "Area models for estimating poverty and labor market indicators.mobi"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
},
"tconfig": null
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
